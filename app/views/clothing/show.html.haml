%p#notice= notice

%h1
  = @clothing.name
  - if user_signed_in?
    = link_to '(wear)', clothing_logs_path + "?clothing_id=" + @clothing.id.to_s + "&date=" + Date.today.to_s, :method => :post
    = link_to '(plan)', clothing_logs_path + "?clothing_id=" + @clothing.id.to_s + "&date=" + Date.tomorrow.to_s, :method => :post
= @clothing.status

.image
  = clothing_thumbnail(@clothing, :size => :large)

%tags
  Tags:
  - @clothing.tags.each do |t|
    = link_to t.name, clothing_by_tag_path(t.name)
- unless @clothing.colour.nil?
  - colours = @clothing.colour.split(",")
  %table  
    %tr
      %td
        = pluralize(colours.size, "Colour")
      - colours.each do |x|
        %td
          .color-box{:style => "background: ##{x}"}
            = x
    %tr
      %td
        Complementary
      - colours.each do |x|
        - comp = Color::HSL.from_html(x).complementary.html
        %td
          .color-box{:style => "background: #{comp}"}
            = comp
    %tr
      %td Triadic:
      - colours.each do |x|
        - col = Color::HSL.from_html(x)
        %td
          - tr1 = col.clone
          - tr2 = col.clone
          - tr1.hue = tr1.hue + 120
          - tr2.hue = tr2.hue - 120
          .color-box{:style => "background: #{tr1.html}"}= tr1.html
          .color-box{:style => "background: #{tr2.html}"}= tr2.html

- if @matches
  = render :partial => 'clothing_thumbnails', :locals => { :list => @matches }

%p= @clothing.notes

- if @logs
  %ul
    - @logs.each do |c|
      %li
        = "#{link_to c.date, clothing_log_path(c)}: ".html_safe
        - ClothingLog.find(:all, :select => 'clothing_id, clothing.name, clothing.id', :order => 'clothing.name', :joins => 'INNER JOIN clothing ON clothing_logs.clothing_id=clothing.id', :conditions => ["date >= ? and date < ?", c.date, c.date + 1.day]).each do |x| 
          = clothing_thumbnail x.clothing

- if user_signed_in?      
  = link_to 'Edit', edit_clothing_path(@clothing)
  \|
= link_to 'Back', clothing_index_path

.clear-both
