/*
 * g.Raphael 0.4.1 - Charting library, based on RaphaÃ«l
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){var a=Math.max,b=Math.min;Raphael.fn.g=Raphael.fn.g||{},Raphael.fn.g.markers={disc:"disc",o:"disc",flower:"flower",f:"flower",diamond:"diamond",d:"diamond",square:"square",s:"square",triangle:"triangle",t:"triangle",star:"star","*":"star",cross:"cross",x:"cross",plus:"plus","+":"plus",arrow:"arrow","->":"arrow"},Raphael.fn.g.shim={stroke:"none",fill:"#000","fill-opacity":0},Raphael.fn.g.txtattr={font:"12px Arial, sans-serif"},Raphael.fn.g.colors=[];var c=[.6,.2,.05,.1333,.75,0];for(var e=0;e<10;e++)e<c.length?Raphael.fn.g.colors.push("hsb("+c[e]+", .75, .75)"):Raphael.fn.g.colors.push("hsb("+c[e-c.length]+", 1, .5)");Raphael.fn.g.text=function(a,b,c){return this.text(a,b,c).attr(this.g.txtattr)},Raphael.fn.g.labelise=function(a,b,c){return a?(a+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(a,d,e){if(d)return(+b).toFixed(d.replace(/^#+\.?/g,"").length);if(e)return(b*100/c).toFixed(e.replace(/^%+\.?/g,"").length)+"%"}):(+b).toFixed(0)},Raphael.fn.g.finger=function(c,d,e,f,g,h,i){if(g&&!f||!g&&!e)return i?"":this.path();h={square:"square",sharp:"sharp",soft:"soft"}[h]||"round";var j;f=Math.round(f),e=Math.round(e),c=Math.round(c),d=Math.round(d);switch(h){case"round":if(!g){var k=~~(f/2);e<k?(k=e,j=["M",c+.5,d+.5-~~(f/2),"l",0,0,"a",k,~~(f/2),0,0,1,0,f,"l",0,0,"z"]):j=["M",c+.5,d+.5-k,"l",e-k,0,"a",k,k,0,1,1,0,f,"l",k-e,0,"z"]}else k=~~(e/2),f<k?(k=f,j=["M",c-~~(e/2),d,"l",0,0,"a",~~(e/2),k,0,0,1,e,0,"l",0,0,"z"]):j=["M",c-k,d,"l",0,k-f,"a",k,k,0,1,1,e,0,"l",0,f-k,"z"];break;case"sharp":if(!g){var l=~~(f/2);j=["M",c,d+l,"l",0,-f,a(e-l,0),0,b(l,e),l,-b(l,e),l+(l*2<f),"z"]}else l=~~(e/2),j=["M",c+l,d,"l",-e,0,0,-a(f-l,0),l,-b(l,f),l,b(l,f),l,"z"];break;case"square":g?j=["M",c+~~(e/2),d,"l",1-e,0,0,-f,e-1,0,"z"]:j=["M",c,d+~~(f/2),"l",0,-f,e,0,0,f,"z"];break;case"soft":g?(k=b(Math.round(e/5),f),j=["M",c-~~(e/2),d,"l",0,k-f,"a",k,k,0,0,1,k,-k,"l",e-2*k,0,"a",k,k,0,0,1,k,k,"l",0,f-k,"z"]):(k=b(e,Math.round(f/5)),j=["M",c+.5,d+.5-~~(f/2),"l",e-k,0,"a",k,k,0,0,1,k,k,"l",0,f-k*2,"a",k,k,0,0,1,-k,k,"l",k-e,0,"z"])}return i?j.join(","):this.path(j)},Raphael.fn.g.disc=function(a,b,c){return this.circle(a,b,c)},Raphael.fn.g.line=function(a,b,c){return this.rect(a-c,b-c/5,2*c,2*c/5)},Raphael.fn.g.square=function(a,b,c){return c*=.7,this.rect(a-c,b-c,2*c,2*c)},Raphael.fn.g.triangle=function(a,b,c){return c*=1.75,this.path("M".concat(a,",",b,"m0-",c*.58,"l",c*.5,",",c*.87,"-",c,",0z"))},Raphael.fn.g.diamond=function(a,b,c){return this.path(["M",a,b-c,"l",c,c,-c,c,-c,-c,c,-c,"z"])},Raphael.fn.g.flower=function(a,b,c,d){c*=1.25;var e=c,f=e*.5;d=+d<3||!d?5:d;var g=["M",a,b+f,"Q"],h;for(var i=1;i<d*2+1;i++)h=i%2?e:f,g=g.concat([+(a+h*Math.sin(i*Math.PI/d)).toFixed(3),+(b+h*Math.cos(i*Math.PI/d)).toFixed(3)]);return g.push("z"),this.path(g.join(","))},Raphael.fn.g.star=function(a,b,c,d,e){d=d||c*.382,e=e||5;var f=["M",a,b+d,"L"],g;for(var h=1;h<e*2;h++)g=h%2?c:d,f=f.concat([a+g*Math.sin(h*Math.PI/e),b+g*Math.cos(h*Math.PI/e)]);return f.push("z"),this.path(f.join(","))},Raphael.fn.g.cross=function(a,b,c){return c/=2.5,this.path("M".concat(a-c,",",b,"l",[-c,-c,c,-c,c,c,c,-c,c,c,-c,c,c,c,-c,c,-c,-c,-c,c,-c,-c,"z"]))},Raphael.fn.g.plus=function(a,b,c){return c/=2,this.path("M".concat(a-c/2,",",b-c/2,"l",[0,-c,c,0,0,c,c,0,0,c,-c,0,0,c,-c,0,0,-c,-c,0,0,-c,"z"]))},Raphael.fn.g.arrow=function(a,b,c){return this.path("M".concat(a-c*.7,",",b-c*.4,"l",[c*.6,0,0,-c*.4,c,c*.8,-c,c*.8,0,-c*.4,-c*.6,0],"z"))},Raphael.fn.g.tag=function(a,b,c,d,e){d=d||0,e=e==null?5:e,c=c==null?"$9.99":c;var f=.5522*e,g=this.set(),h=3;return g.push(this.path().attr({fill:"#000",stroke:"#000"})),g.push(this.text(a,b,c).attr(this.g.txtattr).attr({fill:"#fff","font-family":"Helvetica, Arial"})),g.update=function(){this.rotate(0,a,b);var c=this[1].getBBox();if(c.height>=e*2)this[0].attr({path:["M",a,b+e,"a",e,e,0,1,1,0,-e*2,e,e,0,1,1,0,e*2,"m",0,-e*2-h,"a",e+h,e+h,0,1,0,0,(e+h)*2,"L",a+e+h,b+c.height/2+h,"l",c.width+2*h,0,0,-c.height-2*h,-c.width-2*h,0,"L",a,b-e-h].join(",")});else{var g=Math.sqrt(Math.pow(e+h,2)-Math.pow(c.height/2+h,2));this[0].attr({path:["M",a,b+e,"c",-f,0,-e,f-e,-e,-e,0,-f,e-f,-e,e,-e,f,0,e,e-f,e,e,0,f,f-e,e,-e,e,"M",a+g,b-c.height/2-h,"a",e+h,e+h,0,1,0,0,c.height+2*h,"l",e+h-g+c.width+2*h,0,0,-c.height-2*h,"L",a+g,b-c.height/2-h].join(",")})}return this[1].attr({x:a+e+h+c.width/2,y:b}),d=(360-d)%360,this.rotate(d,a,b),d>90&&d<270&&this[1].attr({x:a-e-h-c.width/2,y:b,rotation:[180+d,a,b]}),this},g.update(),g},Raphael.fn.g.popupit=function(b,c,d,e,f){e=e==null?2:e,f=f||5,b=Math.round(b),c=Math.round(c);var g=d.getBBox(),h=Math.round(g.width/2),i=Math.round(g.height/2),j=[0,h+f*2,0,-h-f*2],k=[-i*2-f*3,-i-f,0,-i-f],l=["M",b-j[e],c-k[e],"l",-f,(e==2)*-f,-a(h-f,0),0,"a",f,f,0,0,1,-f,-f,"l",0,-a(i-f,0),(e==3)*-f,-f,(e==3)*f,-f,0,-a(i-f,0),"a",f,f,0,0,1,f,-f,"l",a(h-f,0),0,f,!e*-f,f,!e*f,a(h-f,0),0,"a",f,f,0,0,1,f,f,"l",0,a(i-f,0),(e==1)*f,f,(e==1)*-f,f,0,a(i-f,0),"a",f,f,0,0,1,-f,f,"l",-a(h-f,0),0,"z"].join(","),m=[{x:b,y:c+f*2+i},{x:b-f*2-h,y:c},{x:b,y:c-f*2-i},{x:b+f*2+h,y:c}][e];return d.translate(m.x-h-g.x,m.y-i-g.y),this.path(l).attr({fill:"#000",stroke:"none"}).insertBefore(d.node?d:d[0])},Raphael.fn.g.popup=function(b,c,d,e,f){e=e==null?2:e>3?3:e,f=f||5,d=d||"$9.99";var g=this.set(),h=3;return g.push(this.path().attr({fill:"#000",stroke:"#000"})),g.push(this.text(b,c,d).attr(this.g.txtattr).attr({fill:"#fff","font-family":"Helvetica, Arial"})),g.update=function(d,g,h){d=d||b,g=g||c;var j=this[1].getBBox(),k=j.width/2,m=j.height/2,n=[0,k+f*2,0,-k-f*2],o=[-m*2-f*3,-m-f,0,-m-f],p=["M",d-n[e],g-o[e],"l",-f,(e==2)*-f,-a(k-f,0),0,"a",f,f,0,0,1,-f,-f,"l",0,-a(m-f,0),(e==3)*-f,-f,(e==3)*f,-f,0,-a(m-f,0),"a",f,f,0,0,1,f,-f,"l",a(k-f,0),0,f,!e*-f,f,!e*f,a(k-f,0),0,"a",f,f,0,0,1,f,f,"l",0,a(m-f,0),(e==1)*f,f,(e==1)*-f,f,0,a(m-f,0),"a",f,f,0,0,1,-f,f,"l",-a(k-f,0),0,"z"].join(","),q=[{x:d,y:g+f*2+m},{x:d-f*2-k,y:g},{x:d,y:g-f*2-m},{x:d+f*2+k,y:g}][e];return q.path=p,h?this.animate(q,500,">"):this.attr(q),this},g.update(b,c)},Raphael.fn.g.flag=function(a,b,c,d){d=d||0,c=c||"$9.99";var e=this.set(),f=3;return e.push(this.path().attr({fill:"#000",stroke:"#000"})),e.push(this.text(a,b,c).attr(this.g.txtattr).attr({fill:"#fff","font-family":"Helvetica, Arial"})),e.update=function(a,b){this.rotate(0,a,b);var c=this[1].getBBox(),e=c.height/2;return this[0].attr({path:["M",a,b,"l",e+f,-e-f,c.width+2*f,0,0,c.height+2*f,-c.width-2*f,0,"z"].join(",")}),this[1].attr({x:a+e+f+c.width/2,y:b}),d=360-d,this.rotate(d,a,b),d>90&&d<270&&this[1].attr({x:a-r-f-c.width/2,y:b,rotation:[180+d,a,b]}),this},e.update(a,b)},Raphael.fn.g.label=function(a,c,d){var e=this.set();return e.push(this.rect(a,c,10,10).attr({stroke:"none",fill:"#000"})),e.push(this.text(a,c,d).attr(this.g.txtattr).attr({fill:"#fff"})),e.update=function(){var a=this[1].getBBox(),c=b(a.width+10,a.height+10)/2;this[0].attr({x:a.x-c/2,y:a.y-c/2,width:a.width+c,height:a.height+c,r:c})},e.update(),e},Raphael.fn.g.labelit=function(a){var c=a.getBBox(),d=b(20,c.width+10,c.height+10)/2;return this.rect(c.x-d/2,c.y-d/2,c.width+d,c.height+d,d).attr({stroke:"none",fill:"#000"}).insertBefore(a.node?a:a[0])},Raphael.fn.g.drop=function(a,b,c,d,e){d=d||30,e=e||0;var f=this.set();return f.push(this.path(["M",a,b,"l",d,0,"A",d*.4,d*.4,0,1,0,a+d*.7,b-d*.7,"z"]).attr({fill:"#000",stroke:"none",rotation:[22.5-e,a,b]})),e=(e+90)*Math.PI/180,f.push(this.text(a+d*Math.sin(e),b+d*Math.cos(e),c).attr(this.g.txtattr).attr({"font-size":d*12/30,fill:"#fff"})),f.drop=f[0],f.text=f[1],f},Raphael.fn.g.blob=function(b,c,d,e,f){e=(+e+1?e:45)+90,f=f||12;var g=Math.PI/180,h=f*12/12,i=this.set();return i.push(this.path().attr({fill:"#000",stroke:"none"})),i.push(this.text(b+f*Math.sin(e*g),c+f*Math.cos(e*g)-h/2,d).attr(this.g.txtattr).attr({"font-size":h,fill:"#fff"})),i.update=function(d,i,l){d=d||b,i=i||c;var n=this[1].getBBox(),o=a(n.width+h,f*25/12),p=a(n.height+h,f*25/12),q=d+f*Math.sin((e-22.5)*g),r=i+f*Math.cos((e-22.5)*g),s=d+f*Math.sin((e+22.5)*g),t=i+f*Math.cos((e+22.5)*g),u=(s-q)/2,v=(t-r)/2,w=o/2,x=p/2,y=-Math.sqrt(Math.abs(w*w*x*x-w*w*v*v-x*x*u*u)/(w*w*v*v+x*x*u*u)),z=y*w*v/x+(s+q)/2,A=y*-x*u/w+(t+r)/2;return l?this.animate({x:z,y:A,path:["M",b,c,"L",s,t,"A",w,x,0,1,1,q,r,"z"].join(",")},500,">"):this.attr({x:z,y:A,path:["M",b,c,"L",s,t,"A",w,x,0,1,1,q,r,"z"].join(",")}),this},i.update(b,c),i},Raphael.fn.g.colorValue=function(a,c,d,e){return"hsb("+[b((1-a/c)*.4,1),d||.75,e||.75]+")"},Raphael.fn.g.snapEnds=function(a,b,c){function f(a){return Math.abs(a-.5)<.25?~~a+.5:Math.round(a)}var d=a,e=b;if(d==e)return{from:d,to:e,power:0};var g=(e-d)/c,h=~~g,i=h,j=0;if(h){while(i)j--,i=~~(g*Math.pow(10,j))/Math.pow(10,j);j++}else{while(!h)j=j||1,h=~~(g*Math.pow(10,j))/Math.pow(10,j),j++;j&&j--}return e=f(b*Math.pow(10,j))/Math.pow(10,j),e<b&&(e=f((b+.5)*Math.pow(10,j))/Math.pow(10,j)),d=f((a-(j>0?0:.5))*Math.pow(10,j))/Math.pow(10,j),{from:d,to:e,power:j}},Raphael.fn.g.axis=function(a,b,c,e,f,g,h,i,j,k){k=k==null?2:k,j=j||"t",g=g||10;var l=j=="|"||j==" "?["M",a+.5,b,"l",0,.001]:h==1||h==3?["M",a+.5,b,"l",0,-c]:["M",a,b+.5,"l",c,0],m=this.g.snapEnds(e,f,g),n=m.from,o=m.to,p=m.power,q=0,r=this.set();d=(o-n)/g;var s=n,t=p>0?p:0;x=c/g;if(+h==1||+h==3){var u=b,v=(h-1?1:-1)*(k+3+!!(h-1));while(u>=b-c)j!="-"&&j!=" "&&(l=l.concat(["M",a-(j=="+"||j=="|"?k:!(h-1)*k*2),u+.5,"l",k*2+1,0])),r.push(this.text(a+v,u,i&&i[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr).attr({"text-anchor":h-1?"start":"end"})),s+=d,u-=x;Math.round(u+x-(b-c))&&(j!="-"&&j!=" "&&(l=l.concat(["M",a-(j=="+"||j=="|"?k:!(h-1)*k*2),b-c+.5,"l",k*2+1,0])),r.push(this.text(a+v,b-c,i&&i[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr).attr({"text-anchor":h-1?"start":"end"})))}else{s=n,t=(p>0)*p,v=(h?-1:1)*(k+9+!h);var w=a,x=c/g,y=0,z=0;while(w<=a+c){j!="-"&&j!=" "&&(l=l.concat(["M",w+.5,b-(j=="+"?k:!!h*k*2),"l",0,k*2+1])),r.push(y=this.text(w,b+v,i&&i[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr));var A=y.getBBox();z>=A.x-5?r.pop(r.length-1).remove():z=A.x+A.width,s+=d,w+=x}Math.round(w-x-a-c)&&(j!="-"&&j!=" "&&(l=l.concat(["M",a+c+.5,b-(j=="+"?k:!!h*k*2),"l",0,k*2+1])),r.push(this.text(a+c,b+v,i&&i[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(this.g.txtattr)))}var B=this.path(l);return B.text=r,B.all=this.set([B,r]),B.remove=function(){this.text.remove(),this.constructor.prototype.remove.call(this)},B},Raphael.el.lighter=function(a){a=a||2;var c=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[c[0],c[1]],c[0]=Raphael.rgb2hsb(Raphael.getRGB(c[0]).hex),c[1]=Raphael.rgb2hsb(Raphael.getRGB(c[1]).hex),c[0].b=b(c[0].b*a,1),c[0].s=c[0].s/a,c[1].b=b(c[1].b*a,1),c[1].s=c[1].s/a,this.attr({fill:"hsb("+[c[0].h,c[0].s,c[0].b]+")",stroke:"hsb("+[c[1].h,c[1].s,c[1].b]+")"})},Raphael.el.darker=function(a){a=a||2;var c=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[c[0],c[1]],c[0]=Raphael.rgb2hsb(Raphael.getRGB(c[0]).hex),c[1]=Raphael.rgb2hsb(Raphael.getRGB(c[1]).hex),c[0].s=b(c[0].s*a,1),c[0].b=c[0].b/a,c[1].s=b(c[1].s*a,1),c[1].b=c[1].b/a,this.attr({fill:"hsb("+[c[0].h,c[0].s,c[0].b]+")",stroke:"hsb("+[c[1].h,c[1].s,c[1].b]+")"})},Raphael.el.original=function(){this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs)}})()